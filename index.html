<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentence Organizer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100 p-2 md:p-8">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-xl md:text-4xl font-bold text-center text-gray-800 mb-4 md:mb-8">
                Sentence Organizer
            </h1>
            
            <!-- Mobile hint toast -->
            <div id="mobileHint" class="fixed top-2 left-2 right-2 bg-blue-600 text-white p-3 rounded-lg shadow-xl z-50 animate-pulse hidden">
                <p class="text-xs font-medium">
                    💡 Tip: Touch and drag sentences to organize them!
                </p>
            </div>

            <!-- Main Grid Layout - Always 3 columns -->
            <div class="grid grid-cols-3 gap-2 md:gap-6">
                
                <!-- Left Column - Categories 1 & 2 -->
                <div class="space-y-2 md:space-y-6">
                    <div id="zone1" class="drop-zone" data-drop-zone="zone1">
                        <h3 class="text-[11px] md:text-lg font-bold text-gray-700 mb-1.5 md:mb-4">
                            Category 1
                        </h3>
                        <div class="sentence-container flex flex-wrap gap-1 md:gap-3">
                            <div class="empty-state w-full flex items-center justify-center py-4 md:py-8">
                                <div class="text-center">
                                    <div class="text-xl md:text-3xl mb-1 md:mb-2">📥</div>
                                    <p class="text-gray-400 italic text-[10px] md:text-sm">
                                        <span class="mobile-text">Touch and drag here</span>
                                        <span class="desktop-text">Drop sentences here</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="zone2" class="drop-zone" data-drop-zone="zone2">
                        <h3 class="text-[11px] md:text-lg font-bold text-gray-700 mb-1.5 md:mb-4">
                            Category 2
                        </h3>
                        <div class="sentence-container flex flex-wrap gap-1 md:gap-3">
                            <div class="empty-state w-full flex items-center justify-center py-4 md:py-8">
                                <div class="text-center">
                                    <div class="text-xl md:text-3xl mb-1 md:mb-2">📥</div>
                                    <p class="text-gray-400 italic text-[10px] md:text-sm">
                                        <span class="mobile-text">Touch and drag here</span>
                                        <span class="desktop-text">Drop sentences here</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Center Column - Available Sentences -->
                <div class="flex flex-col">
                    <h2 class="text-xs md:text-xl font-bold text-center text-gray-700 mb-1.5 md:mb-4">
                        Available Sentences
                    </h2>
                    <div id="available" class="drop-zone flex-1" data-drop-zone="available">
                        <div class="sentence-container flex flex-wrap gap-1 md:gap-3">
                            <!-- Sentences will be dynamically added here -->
                        </div>
                    </div>
                </div>

                <!-- Right Column - Categories 3 & 4 -->
                <div class="space-y-2 md:space-y-6">
                    <div id="zone3" class="drop-zone" data-drop-zone="zone3">
                        <h3 class="text-[11px] md:text-lg font-bold text-gray-700 mb-1.5 md:mb-4">
                            Category 3
                        </h3>
                        <div class="sentence-container flex flex-wrap gap-1 md:gap-3">
                            <div class="empty-state w-full flex items-center justify-center py-4 md:py-8">
                                <div class="text-center">
                                    <div class="text-xl md:text-3xl mb-1 md:mb-2">📥</div>
                                    <p class="text-gray-400 italic text-[10px] md:text-sm">
                                        <span class="mobile-text">Touch and drag here</span>
                                        <span class="desktop-text">Drop sentences here</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="zone4" class="drop-zone" data-drop-zone="zone4">
                        <h3 class="text-[11px] md:text-lg font-bold text-gray-700 mb-1.5 md:mb-4">
                            Category 4
                        </h3>
                        <div class="sentence-container flex flex-wrap gap-1 md:gap-3">
                            <div class="empty-state w-full flex items-center justify-center py-4 md:py-8">
                                <div class="text-center">
                                    <div class="text-xl md:text-3xl mb-1 md:mb-2">📥</div>
                                    <p class="text-gray-400 italic text-[10px] md:text-sm">
                                        <span class="mobile-text">Touch and drag here</span>
                                        <span class="desktop-text">Drop sentences here</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Debug Settings -->
            <div class="mt-4 md:mt-8 bg-gray-900 text-white rounded-xl shadow-lg overflow-hidden">
                <button id="debugSettingsToggle" class="w-full px-3 py-2 md:px-4 md:py-3 flex items-center justify-between hover:bg-gray-800 transition-colors">
                    <div class="flex items-center gap-2">
                        <span class="text-sm md:text-lg toggle-icon">▶</span>
                        <span class="font-mono font-semibold text-sm md:text-base">Debug Settings</span>
                        <span id="settingsUnsaved" class="text-yellow-400 text-xs hidden">*</span>
                    </div>
                </button>
                
                <div id="debugSettingsContent" class="hidden border-t border-gray-700">
                    <div class="p-3 md:p-4 space-y-3">
                        <div class="flex items-center gap-3">
                            <label for="truncateLength" class="text-xs md:text-sm text-gray-300 whitespace-nowrap">
                                Truncate Length:
                            </label>
                            <input
                                id="truncateLength"
                                type="text"
                                value="5"
                                placeholder="5"
                                class="px-2 py-1 bg-gray-800 border border-gray-600 rounded text-white text-xs md:text-sm w-20 focus:outline-none focus:border-blue-500"
                            />
                            <span class="text-[10px] md:text-xs text-gray-500">
                                (1-200) <span id="truncateCurrent" class="text-gray-400 hidden">• current: <span class="current-value">5</span></span>
                            </span>
                        </div>
                        
                        <div class="flex items-center gap-3">
                            <label for="doubleTapDelay" class="text-xs md:text-sm text-gray-300 whitespace-nowrap">
                                Double-tap Delay:
                            </label>
                            <input
                                id="doubleTapDelay"
                                type="text"
                                value="400"
                                placeholder="400"
                                class="px-2 py-1 bg-gray-800 border border-gray-600 rounded text-white text-xs md:text-sm w-20 focus:outline-none focus:border-blue-500"
                            />
                            <span class="text-[10px] md:text-xs text-gray-500" title="Time window for second tap/click to count as double-tap">
                                ms (100-1000) <span id="delayCurrent" class="text-gray-400 hidden">• current: <span class="current-value">400</span>ms</span>
                            </span>
                        </div>
                        
                        <div id="stateInfo" class="flex items-center justify-between hidden">
                            <div class="flex flex-col gap-1">
                                <span id="expandedInfo" class="text-[10px] md:text-xs text-gray-400 hidden">
                                    <span class="count">0</span> sentence<span class="plural">s</span> expanded
                                </span>
                                <span id="trashedInfo" class="text-[10px] md:text-xs text-red-400 hidden">
                                    <span class="count">0</span> sentence<span class="plural">s</span> marked trash
                                </span>
                                <span id="recycleBinInfo" class="text-[10px] md:text-xs text-orange-400 hidden">
                                    <span class="count">0</span> in recycle bin
                                </span>
                            </div>
                            <div class="flex gap-2 flex-wrap justify-end">
                                <button id="collapseAllBtn" class="px-2 py-0.5 md:px-3 md:py-1 bg-gray-600 hover:bg-gray-700 rounded text-[10px] md:text-xs transition-colors hidden">
                                    Collapse All
                                </button>
                                <button id="untrashAllBtn" class="px-2 py-0.5 md:px-3 md:py-1 bg-red-600 hover:bg-red-700 rounded text-[10px] md:text-xs transition-colors hidden">
                                    Untrash All
                                </button>
                                <button id="restoreLastBtn" class="px-2 py-0.5 md:px-3 md:py-1 bg-green-600 hover:bg-green-700 rounded text-[10px] md:text-xs transition-colors hidden">
                                    Restore Last
                                </button>
                                <button id="emptyBinBtn" class="px-2 py-0.5 md:px-3 md:py-1 bg-orange-600 hover:bg-orange-700 rounded text-[10px] md:text-xs transition-colors hidden">
                                    Empty Bin
                                </button>
                            </div>
                        </div>
                        
                        <div class="text-[10px] md:text-xs text-gray-400 mt-3 p-2 bg-gray-800 rounded">
                            <p class="mb-1"><strong>Tips:</strong></p>
                            <p>• <strong>Double-tap delay:</strong> Maximum time between taps/clicks to trigger trash state</p>
                            <p>• Lower = faster double-tap required (harder to trigger)</p>
                            <p>• Higher = more time allowed between taps (easier to trigger)</p>
                            <p class="mt-1">• <strong>Recycle Bin:</strong> Appears when dragging - drop sentences to remove</p>
                            <p>• The recycle bin can be repositioned while dragging</p>
                        </div>
                    </div>
                    <div class="p-1.5 md:p-2 border-t border-gray-700 flex justify-between items-center">
                        <span id="settingsStatus" class="text-[10px] md:text-xs text-gray-500">
                            Settings saved
                        </span>
                        <button
                            id="applySettingsBtn"
                            disabled
                            class="px-2 py-0.5 md:px-3 md:py-1 rounded text-[10px] md:text-xs font-medium transition-all bg-gray-700 text-gray-500 cursor-not-allowed"
                        >
                            Apply
                        </button>
                    </div>
                </div>
            </div>

            <!-- Debug Log -->
            <div class="mt-4 md:mt-8 bg-gray-900 text-white rounded-xl shadow-lg overflow-hidden">
                <button id="debugLogToggle" class="w-full px-3 py-2 md:px-4 md:py-3 flex items-center justify-between hover:bg-gray-800 transition-colors">
                    <div class="flex items-center gap-2">
                        <span class="text-sm md:text-lg toggle-icon">▶</span>
                        <span class="font-mono font-semibold text-sm md:text-base">Debug Log</span>
                        <span id="logCount" class="text-gray-400 text-xs md:text-sm">(0 entries)</span>
                    </div>
                    <span id="modeIndicator" class="text-[10px] md:text-xs text-gray-400">
                        Desktop Mode
                    </span>
                </button>
                
                <div id="debugLogContent" class="hidden border-t border-gray-700">
                    <pre id="debugLogEntries" class="p-2 md:p-4 h-64 overflow-y-auto font-mono text-[10px] md:text-xs text-gray-300 whitespace-pre-wrap">
                        <span class="text-gray-500 italic">No debug entries yet. Start dragging!</span>
                    </pre>
                    <div class="p-1.5 md:p-2 border-t border-gray-700 flex justify-between items-center">
                        <span class="text-[10px] md:text-xs text-gray-500">
                            Showing last 100 entries
                        </span>
                        <button id="clearLogBtn" class="px-2 py-0.5 md:px-3 md:py-1 bg-red-600 hover:bg-red-700 rounded text-[10px] md:text-xs transition-colors">
                            Clear Log
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Floating drag preview for mobile -->
        <div id="touchDragPreview" class="fixed pointer-events-none z-50 px-3 py-2 text-white rounded-xl shadow-2xl transform -rotate-3 scale-110 hidden">
            <span class="text-xs font-medium"></span>
        </div>

        <!-- Floating Trash Bin -->
        <div id="recycleBin" class="fixed z-40 w-16 h-16 md:w-20 md:h-20 rounded-full shadow-2xl flex items-center justify-center cursor-move transition-all duration-300 opacity-90 bg-gray-800 hover:bg-gray-700 hidden" 
             data-drop-zone="recycleBin"
             style="left: 20px; top: 80px; touch-action: none;">
            <span class="text-2xl md:text-3xl">🗑️</span>
            <div id="recycleBinCount" class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs font-bold flex items-center justify-center shadow-lg z-50 hidden">
                0
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>